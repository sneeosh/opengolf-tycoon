# Proposed Specs — Priority Review

**Date:** 2026-02-27
**Context:** Alpha 0.1.0, LAUNCH_EVALUATION rated 6.5/10

This document reviews the current game state and proposes specs that should be written next, ordered by impact. Each entry includes the rationale, what the spec should cover, and suggested scope.

---

## Current Spec Inventory

| Document | Location | Status |
|----------|----------|--------|
| Course Design Upgrades | `docs/specs/course-design-upgrades.md` | Proposal — covers routing, tee boxes, pins, carry display |
| Beta Milestone Specs | `docs/beta-milestone-specs.md` | 7 milestones defined — several now outdated (tutorial, onboarding done) |
| Algorithm Docs (15) | `docs/algorithms/` | Living reference — comprehensive coverage of existing systems |

---

## Proposed New Specs (Prioritized)

### 1. Simulated Tournament Rounds

**Priority: CRITICAL — This is the single highest-impact missing spec.**

**Why:** Tournaments are the endgame. Currently `generate_tournament_results()` produces random scores — the player's course design has zero influence on tournament outcomes. This breaks the core promise of the game: *design a great course and watch great golf happen on it*.

**What the spec should cover:**
- Accelerated simulation using the real shot engine (angular dispersion, wind, terrain) with animations skipped
- Tournament golfer generation (SERIOUS/PRO tier, N=20-60 field size per tier)
- Multi-round format (1 round for Local, 2 for Regional, 4 for National/Championship)
- Cut line mechanics (top N after round 2 advance)
- Live leaderboard UI during tournament days (scrollable, updating as holes complete)
- Scoring relative to par with tournament-appropriate distribution (not all golfers shooting par)
- Course design → tournament outcome causality (hazards produce bogeys, well-designed holes produce birdie chances, poor routing slows pace)
- Prize money calculation (entry fees from field × multiplier by tier)
- Record tracking: tournament winners, course records set during tournaments
- "Dramatic moment" detection: eagles, hole-in-ones, leaderboard swings flagged for notification
- Performance budget: simulating 60 golfers × 18 holes × 4 rounds must complete within a few seconds of real time

**Scope:** Medium — the shot engine, golfer tier system, and wind/weather are all production-ready. The work is wiring them together in an accelerated loop and building the leaderboard UI.

**Depends on:** Nothing new. All underlying systems exist.

---

### 2. Spectator Camera & Live Scorecard

**Priority: HIGH — Makes the simulation watchable.**

**Why:** The game simulates golfers playing your course, but you can't meaningfully watch them. There's no camera follow, no live scorecard, no way to engage with an individual round. The simulation is the payoff for course design — it needs to be a spectacle, not background noise.

**What the spec should cover:**
- **Follow mode:** Click golfer (or select from a group list) to attach camera with smooth tracking
- Camera behavior during shots: zoom slightly on swing, track ball flight, hold on landing, return to golfer
- Camera behavior between shots: gentle follow at walking pace, pull back for wider view
- **Live scorecard overlay:** Translucent panel showing the followed golfer/group's hole-by-hole scores
- Scorecard shows: golfer name, tier, hole number, par, score, running total, score-to-par color coding
- **Group scorecard:** When following a group, show all group members' scores
- **Quick-switch:** Arrow keys or number keys to cycle between active golfers/groups
- **Exit follow mode:** Escape or click empty space returns to free camera
- **Enhanced thought bubbles:** When following a golfer, show their satisfaction feedback as speech bubbles (already generated by FeedbackManager, just not surfaced in follow mode)
- **Round summary popup:** When a followed golfer finishes, show their full scorecard, best/worst hole, satisfaction rating, money spent at facilities
- Integration with tournament mode: follow mode during tournaments with leaderboard position shown

**Scope:** Medium — camera infrastructure exists (IsometricCamera), golfer state machine exposes position/state. The work is the follow-mode state machine, UI overlays, and camera motion smoothing.

**Depends on:** Independent, but synergizes strongly with Spec #1 (tournaments).

---

### 3. Seasonal System Expansion & Theme-Awareness

**Priority: HIGH — The foundation exists but needs depth.**

**Why:** `SeasonSystem` and `SeasonalEvents` already exist with a compact 28-day year (7 days per season), spawn/maintenance/weather modifiers, and 8 seasonal events. The `SeasonalCalendarPanel` UI is integrated. However, the system lacks theme-aware scaling (Desert winters should be milder than Mountain winters), gradual season transitions (currently hard cutoffs), green fee tolerance variation by season, and tournament prestige modifiers. The 28-day year also compresses seasons so much that economic pressure from winter is brief.

**What the spec should cover:**
- Whether to extend the year length (28 days is very compressed — should it be 120 or 360 days?) and the gameplay implications of each choice
- Theme-aware season modifiers: Desert/Resort mild winters, Mountain harsh winters with optional course closure, Links extra wind in winter
- Gradual season transition blending (spawn rate ramps over 1-2 days instead of hard cutoffs)
- Green fee tolerance modifier by season (summer: players accept premium pricing; winter: only bargain-seekers)
- Tournament prestige modifier by season (fall classics are more prestigious, winter tournaments less so)
- Whether seasonal events need advance notification (currently they just happen)
- Algorithm doc: `docs/algorithms/seasonal-calendar.md` documenting the full modifier stack

**Scope:** Low-Medium — the core system is built and integrated across 12 files. The work is adding modifier dimensions and theme awareness.

**Depends on:** Nothing. All integration points exist.

---

### 4. Economic Balance & Tuning Framework

**Priority: HIGH — All levers exist but are unvalidated.**

**Why:** The game has green fees, building revenue, staff payroll, marketing costs, maintenance, land expansion, and reputation — but nobody has validated that these interact to produce an engaging economic curve. The starting money ($50K), default green fee ($30), and bankruptcy threshold (-$1000) are educated guesses. A spec is needed not just for the target numbers, but for the *methodology* of how to validate them.

**What the spec should cover:**
- Target progression curve: expected player state at Day 30/90/180/360 (holes built, money, reputation, staff)
- Economic pressure points: when should the player feel "tight"? When should they feel wealthy?
- Difficulty preset calibration: Easy should be forgiving, Hard should threaten bankruptcy
- Balance testing protocol: 5 defined playstyles (speedrun, conservative, builder, optimizer, new player), each played through 360 days
- Specific tuning questions with acceptance criteria:
  - Can a player coast on 3 holes forever? (Should be: no, maintenance costs should eventually force expansion or fee optimization)
  - Is there a building combo that generates infinite money? (Should be: no)
  - Does reputation reach 50 by Day 90 with good play? (Should be: yes)
  - Does green fee sensitivity work? ($100 on a 2-star course should crater traffic)
- Exploit checklist: document any strategy that trivializes the economy
- Output: tuned values committed to `data/` JSON files, documented in `docs/algorithms/economy.md`

**Scope:** Unusual — this is more of a testing/tuning spec than a feature spec. Requires systematic playtesting.

**Depends on:** Ideally after Seasonal Calendar (Spec #3), since seasons dramatically affect the economic curve.

---

### 5. Career / Progression Mode

**Priority: MEDIUM-HIGH — Solves the "what do I do after 18 holes?" problem.**

**Why:** After building a good 18-hole course and hosting a Championship tournament, there's limited incentive to continue. The game needs longer-term goals beyond the current 27 milestones. This is the difference between a sandbox toy and a tycoon game.

**What the spec should cover:**
- **Star-gate progression:** Content unlocks tied to course star rating (2 stars → access to Regional tournaments, 3 stars → National, 4 stars → Championship, 5 stars → Hall of Fame)
- **Rival courses:** AI-managed competing courses that set pricing benchmarks and steal golfers if your reputation drops
- **Prestige system:** Lifetime achievement score across multiple courses — incentivizes starting new courses with different themes
- **Unlockable content:** New building types, premium tree varieties, special terrain features earned through milestones
- **Scenario/challenge mode:** Pre-built courses with objectives ("Turn this failing 9-hole into a profitable course in 90 days", "Host a Championship tournament within 1 year")
- **Victory conditions:** Define what "winning" looks like — multiple victory paths (economic, prestige, tournament, design)
- Scope boundaries: what's in v1 career mode vs. what's deferred

**Scope:** Large — this is the biggest feature gap between "sandbox alpha" and "tycoon game." Should be specced thoroughly before any implementation begins.

**Depends on:** Simulated tournaments (Spec #1), Seasonal calendar (Spec #3), Economic balance (Spec #4).

---

### 6. Audio Design Document

**Priority: MEDIUM — The system exists but is muted by default.**

**Why:** `SoundManager` (602 LOC) and `ProceduralAudio` are fully built and generate swing, impact, ambient, and UI sounds procedurally. But `is_muted = true` by default because the quality was deemed insufficient. No spec exists for what "good enough" sounds like or what the path to enabling audio is.

**What the spec should cover:**
- Audio quality targets: reference recordings or descriptions for each sound category (swing whoosh, iron impact, putt click, ball-in-cup, ambient wind/birds/rain)
- Decision: pure procedural vs. hybrid (procedural ambient + recorded samples for core SFX)
- If hybrid: minimal sample list (estimate 10-15 sound files), licensing requirements (CC0/MIT compatible)
- Volume mixing: relative levels for SFX, ambient, UI
- Spatial audio: sounds attenuate with camera distance to golfer
- Weather audio layers: rain intensity, wind gusting, thunder
- Tournament audio: crowd reactions, applause
- Music: ambient background music or intentionally music-free? If music, procedural or composed?
- Browser autoplay policy handling for web build
- Acceptance criteria: "audio defaults to ON" is the success metric

**Scope:** Medium — the architecture is done. The work is either improving procedural generation algorithms or sourcing/integrating recorded samples.

**Depends on:** Nothing.

---

### 7. Notification & Event Feed System

**Priority: MEDIUM — Bridges the gap between "stuff happening" and "player awareness."**

**Why:** Important events (hole-in-one, course record, tournament result, bankruptcy warning, seasonal change) trigger `NotificationToast` popups that auto-dismiss in a few seconds. If you miss them, they're gone. There's no persistent event log, no click-to-navigate, no event history. Players in fast-forward mode miss most events.

**What the spec should cover:**
- Persistent notification feed (sidebar or pull-out panel) showing last N events
- Event categories: Records, Economy, Golfers, Weather, Tournaments, Milestones
- Category filtering and color coding
- Click-to-pan: clicking a golfer event pans camera to that golfer; clicking a hole event pans to that hole
- Priority levels: Critical (bankruptcy warning, game over) interrupts gameplay; Normal auto-dismisses; Info only appears in feed
- Fast-forward handling: batch events during ULTRA speed, show summary on pause/speed-change
- Integration with Follow Mode (Spec #2): events about the followed golfer get priority
- Algorithm doc: event priority ranking and deduplication rules

**Scope:** Low-Medium — `NotificationToast` and `EventBus` signals exist. The work is the persistent feed UI and click-to-navigate behavior.

**Depends on:** Nothing, but synergizes with Spec #2 (Follow Mode).

---

### 8. Golfer Visual Differentiation & Identity

**Priority: MEDIUM-LOW — Quality of life, not blocking.**

**Why:** All golfers look identical (same stick-figure rendering). You can't tell a Beginner from a Pro by looking at them, can't identify returning golfers, and can't visually distinguish groups. This reduces the connection between "watching simulation" and "caring about outcomes."

**What the spec should cover:**
- Tier-based color coding: Beginner=green shirt, Casual=blue, Serious=red, Pro=gold/black
- Name labels visible on hover (currently requires click)
- Group number indicator (small badge)
- "Regular" golfers: named golfers who return if satisfaction was high, building course familiarity over time
- Visual state indicators: fatigue (slouching when low energy), hunger (thought bubble near snack bar), frustration (red tint when angry)
- Tournament golfer differentiation: special appearance or badge during tournament play
- Minimal approach: colored circles/outlines per tier rather than full sprite art

**Scope:** Low-Medium — rendering infrastructure exists. The work is per-tier color palettes and hover label improvements.

**Depends on:** Nothing.

---

### 9. Pathfinding Upgrade (A* on Terrain Grid)

**Priority: MEDIUM-LOW — The current heuristic works but has edge cases.**

**Why:** CLAUDE.md notes "No full A* pathfinding (heuristic-based)." Golfers currently use a heuristic approach that works for most layouts but can produce odd walking paths on complex courses with many water hazards or buildings. As courses get more elaborate (18 holes, multiple buildings, winding paths), pathfinding quality matters more.

**What the spec should cover:**
- A* implementation on the 128×128 terrain grid with terrain-type movement costs
- Movement cost table: PATH=1.0, GRASS/FAIRWAY=1.5, ROUGH=2.0, HEAVY_ROUGH=2.5, TREES=3.0, WATER/OB=impassable
- Building collision avoidance
- Path caching: cache paths between common waypoints (green N → tee N+1) and invalidate on terrain changes
- Performance budget: pathfinding for 8 concurrent golfers must not cause frame drops
- Integration with hole-to-hole routing (Course Design Upgrades Spec 1.1)
- Algorithm doc: `docs/algorithms/pathfinding.md`

**Scope:** Medium — well-understood algorithm, but needs careful performance tuning on a 128×128 grid with 8 concurrent agents.

**Depends on:** Nothing, but synergizes with routing (Course Design Upgrades 1.1).

---

### 10. Web Build & Distribution Spec

**Priority: MEDIUM-LOW for spec, but HIGH for execution timing.**

**Why:** The web build is the primary distribution channel (zero install friction), but `docs/beta-milestone-specs.md` Milestone 7 is the only documentation. A dedicated spec should cover browser compatibility testing, IndexedDB save persistence, autoplay audio handling, and the distribution landing page.

**What the spec should cover:**
- Browser compatibility matrix: Chrome, Firefox, Safari (versions, known issues)
- IndexedDB save reliability: what happens on private browsing, storage limits, cross-session persistence
- Audio autoplay policy: user-interaction gate for enabling audio in browser
- Performance targets: 30+ FPS with 8 golfers on a mid-range laptop
- Custom HTML shell requirements (current `web/custom_shell.html` fixes)
- Cloudflare Pages deployment: URL structure, caching, versioning
- Landing page: what information a first-time visitor needs
- Analytics: basic session tracking for playtesting feedback (optional)

**Scope:** Small-Medium — most infrastructure exists. The spec is about defining quality bars and test plans.

**Depends on:** Nothing.

---

## Specs NOT Recommended Right Now

These are features mentioned in various docs that should **not** get specs yet:

| Feature | Why Defer |
|---------|-----------|
| **Mobile/touch input** | Too different from current input model; distracts from core game quality |
| **Localization/i18n** | No international audience yet; premature optimization |
| **Steam achievements** | Map to milestones later; no Steam integration exists |
| **Animated golfer sprites** | Procedural stick figures work; art investment should come after gameplay is solid |
| **Course sharing/export** | Needs stable save format and community to share with |
| **Player-controlled golfer mode** | Different game genre (sports vs. tycoon); explicitly deferred in beta milestones |
| **Bridges (paths over water)** | Nice-to-have terrain feature, not blocking any core loop |

---

## Recommended Writing Order

```
Now:
  1. Simulated Tournament Rounds    ← Biggest single impact on game quality
  2. Spectator Camera & Scorecard   ← Makes #1 watchable

Next:
  3. Seasonal Economic Variation    ← Tycoon depth (promote from beta-milestone-specs)
  4. Economic Balance Framework     ← Validate the numbers
  5. Career / Progression Mode      ← Long-term engagement design

When Ready:
  6. Audio Design Document          ← Unblock audio-on-by-default
  7. Notification & Event Feed      ← Player awareness
  8. Golfer Visual Differentiation  ← Polish

As Needed:
  9. Pathfinding Upgrade            ← When complex courses expose issues
  10. Web Build & Distribution      ← Before public beta launch
```

---

## Relationship to Existing Docs

- **`docs/beta-milestone-specs.md`** — Milestones 1 (Phase 3 verification) and 3 (Tutorial/Onboarding) are now complete and should be marked done. Milestone 2 (Seasonal Calendar) should be promoted into a proper spec. Milestones 4-7 remain relevant.
- **`docs/specs/course-design-upgrades.md`** — Remains valid. Priority 1 items (routing, tee boxes, pins, forced carry) align with and complement the specs proposed here.
- **`LAUNCH_EVALUATION.md`** — The Phase 1/2/3 roadmap in Part 8 aligns with this proposal. Specs #1 and #2 here correspond to LAUNCH_EVALUATION Phase 1A and 1B.
- **Algorithm docs** — Each new spec that modifies gameplay should include requirements for new or updated algorithm docs.
