# Advisor System

## Overview

The Advisor system analyzes game state at end-of-day (and on demand) to generate context-sensitive tips and recommendations. Tips cover pricing, course design, amenities, staffing, pace of play, finances, and progression. Tips are categorized by priority (Critical, Warning, Suggestion, Info) and displayed in a dedicated panel accessible via the A hotkey.

## Tip Generation

Tips are generated by analyzing multiple game state dimensions:

### Pricing Tips
- **Too High**: Green fee > 1.8x the "fair price" based on reputation and hole count
- **Too Low**: Green fee < 0.5x fair price with reputation > 30
- **Low Value Rating**: Course rating value component < 2.0 stars

Fair price formula: `fair_price_per_hole = reputation * 2.0 * hole_factor / hole_count`
where `hole_factor = clamp(hole_count / 18.0, 0.15, 1.0)`

### Course Design Tips
- **No Holes**: Critical tip if no holes exist
- **Few Holes**: Suggest expansion if < 9 holes after day 3
- **Par Variety**: Missing par 3s (6+ holes) or par 5s (9+ holes)
- **Low Design Rating**: Design rating < 2.0 with 6+ holes
- **Extreme Difficulty**: Any hole with difficulty > 8.0/10

### Amenity Tips
- **No Clubhouse**: Warning if missing with 3+ holes
- **No Restroom**: Suggestion if missing with 6+ holes
- **No Snack Bar**: Suggestion if missing with 9+ holes
- **No Pro Shop**: Suggestion if reputation > 40
- **No Driving Range**: Info if 9+ holes and reputation > 50

### Pace Tips
- **Slow Pace**: Warning if pace rating < 2.0 and > 3 slow pace complaints
- **Low Pace Rating**: Suggestion if pace rating < 2.0

### Financial Tips
- **Low Funds**: Critical if money < $5,000 (above bankruptcy threshold)
- **Consistent Losses**: Warning if 3+ consecutive days of negative profit
- **Loan Reminder**: Info if outstanding loan exists
- **High Costs**: Warning if operating costs > 1.5x revenue

### Progression Tips
- **Tournament Ready**: Info if 9+ holes, 2.5+ rating, 14+ days, 30+ reputation
- **Low Reputation**: Suggestion if reputation < 30 after day 10
- **High Reputation**: Info congratulation if reputation > 80

### Staffing Tips
- **Low Staff Quality**: Warning if condition < 2.5 with part-time staff
- **Expensive Staff**: Suggestion if premium staff costs > 40% of revenue

## Priority Levels

| Priority | Label | Color | When Used |
|----------|-------|-------|-----------|
| CRITICAL | URGENT | Red | Immediate action needed (bankruptcy, no holes) |
| WARNING | WARNING | Yellow | Problem affecting performance |
| SUGGESTION | TIP | Blue | Improvement opportunity |
| INFO | INFO | Gray | Informational, nice-to-know |

## Tip Cooldown

Dismissed tips enter a 5-day cooldown to prevent nagging. After cooldown, tips can reappear if conditions still apply.

## Integration

- **End-of-day**: Tips auto-refresh. Top critical/warning tip shown as toast notification.
- **On-demand**: Player presses A to open panel, which triggers a refresh.
- **Save/load**: Dismissed tip IDs and cooldowns are persisted.

## Tuning Levers

| Parameter | Default | Effect |
|-----------|---------|--------|
| `TIP_COOLDOWN_DAYS` | 5 | Days before dismissed tip can reappear |
| Fair price multiplier thresholds | 1.8x / 0.5x | When to trigger pricing tips |
| Min day thresholds | varies | When tips become relevant |
| Reputation thresholds | 30, 40, 50, 80 | Trigger points for different tip categories |
